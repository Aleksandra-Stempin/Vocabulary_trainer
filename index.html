<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Vocabulary trainer</title>
	<link rel="stylesheet" href="main.css">
	
	
	

	
</head>
<html>
<body>


<h1>Vocabulary trainer</h1>


<div>
	<input type="file" id="fileInput" accept=".txt">
</div>

<div id="textDiv">
	<p id="wordPolishHeader"></p>
	<p id="wordPolish"></p>
	<p id="wordDisplay"></p>

	<p id="usedLetters"></p>
	<p id="resultWin"></p>
	<p id="resultFail"></p>
</div>

<div id = "guessDiv">
	<input type="text" id="guessInput"><br>
	<button id="guessLetter" class="myButton" onclick="guessLetter()">Guess Letter</button>
	<button  id="guessWord" class="myButton" onclick="guessWord()">Guess Word</button>
	
</div>


<div>
	<button id="newGame" class="myButton" onclick="chooseWord()">New Game</button>
</div>
<p id="test"></p>





<script>
let words = [];
let currentWord = '';
let displayWord = '';
let wordToGuess = '';
let wordByLetters = ''
let failText = ''
let usedLetters = [];
document.getElementById("guessLetter").disabled=true;
document.getElementById("guessWord").disabled=true;
document.getElementById("newGame").disabled=true;
document.getElementById("fileInput").disabled=false;

document.getElementById('fileInput').addEventListener('change', function selectedFileChanged() {
    let file = this.files[0];
    let reader = new FileReader();
    reader.onload = function fileReadCompleted() {
        words = reader.result.split('\n').map(line => line.split('-'));
        
		
		chooseWord();
    };
    reader.readAsText(file);
});

function chooseWord() {
    let wordPair = words[Math.floor(Math.random() * words.length)];
	wordToGuess = wordPair[1].toLowerCase().trim();
    currentWord = wordPair[0].toLowerCase().trim();
    displayWord = '-'.repeat(currentWord.length);
	document.getElementById('wordPolishHeader').textContent = "Word to translate"
	document.getElementById('wordPolish').textContent = wordToGuess;
	document.getElementById('wordDisplay').textContent = displayWord;
    usedLetters = [];
	
    document.getElementById('usedLetters').textContent = '';
	document.getElementById('resultWin').textContent = '';
	document.getElementById('resultFail').textContent = '';
	
	
	document.getElementById("guessLetter").disabled=false;
	document.getElementById("guessWord").disabled=false;
	document.getElementById("newGame").disabled=false;
	
	document.getElementById("fileInput").disabled=true;
}

function guessLetter() {
    let userLetter = document.getElementById('guessInput').value;
	let letter = userLetter.toLowerCase().trim();
    if (!usedLetters.includes(letter)) {
        usedLetters.push(letter);
        document.getElementById('usedLetters').textContent = 'Used letters: ' + usedLetters.join(', ');
        let newDisplayWord = '';
        for (let i = 0; i < currentWord.length; i++) {
            if (currentWord[i] === letter) {
                newDisplayWord += letter;
            } else {
                newDisplayWord += displayWord[i];
            }
        }
        displayWord = newDisplayWord;
        document.getElementById('wordDisplay').textContent = displayWord;
		document.getElementById("guessInput").value = ""
		wordByLetters = document.getElementById("wordDisplay").textContent
		document.getElementById("test").textContent="wordByLetters " + wordByLetters
		if (wordByLetters === currentWord){
			checkWin()
		}

    }
}

function guessWord() {
    let userWord = document.getElementById('guessInput').value;
	let word = userWord.toLowerCase().trim();
    if (word === currentWord) {
        displayWord = currentWord;
        document.getElementById('wordDisplay').textContent = displayWord;
		document.getElementById("guessInput").value = ""
        checkWin();
    }
	else{
		document.getElementById("guessInput").value = ""
        checkWin();
	}
}

function checkWin() {
    if (displayWord === currentWord) {
        document.getElementById('resultWin').textContent = 'Congratulations! You guessed the word!';
    }
	else{
        document.getElementById('resultFail').textContent = 'Game over! The correct answer is: ' + currentWord;
		
    }
	document.getElementById("wordDisplay").textContent=""
	document.getElementById("usedLetters").textContent=""
	
	document.getElementById("test").textContent=""
	
	document.getElementById("guessLetter").disabled=true;
	document.getElementById("guessWord").disabled=true;
	document.getElementById("fileInput").disabled=false;
}
</script>





</body>
</html>
